---
import { getCollection } from "astro:content";
import FormattedDate from "./FormattedDate.astro";

const { content = "blog", limit = 3 } = Astro.props;

const posts = (await getCollection(content as any))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, limit);
---

<style>
  ul li img {
    margin-bottom: 0.5rem;
    border-radius: 12px;
  }

  ul a:hover img {
    box-shadow: var(--box-shadow);
  }
</style>

<ul class="">
  {
    posts.map((post) => (
      <li>
        <a href={`/portfolio_site/projects/${post.id}/`}>
          <img width={720} height={360} src={post.data.heroImage} alt="" />
          <h4 class="title">{post.data.title}</h4>
          <p class="date">
            <FormattedDate date={post.data.pubDate} />
          </p>
        </a>
      </li>
    ))
  }
</ul>
